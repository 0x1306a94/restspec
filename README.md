# restspec

#### Usage
```sh
Usage: restspec-cli [OPTIONS] --language <LANGUAGE> [FILES]...

Arguments:
  [FILES]...  input files

Options:
  -l, --language <LANGUAGE>        language [possible values: objective-c, java]
  -i, --include-dir <INCLUDE_DIR>  include dir [default: .]
  -o, --output-dir <OUTPUT_DIR>    output dir [default: .]
  -h, --help                       Print help (see more with '--help')
  -V, --version                    Print version
```

#### Run Sample
```sh
git clone https://github.com/0x1306a94/restspec.git
cd restspec
cargo run -p restspec-cli -- -l 'objective-c' -i samples -o samples_out/objective_c samples/test.restspec
```

* `basic.restspec`
```
syntax = "restspec1";

option JavaPagckageName = "com.test.xx";
option ObjectiveCPrefix = "KK";

/// BasicObject
message BasicObject {
    /// name
    String name;
}
```

* `test.restspec`
```
syntax = "restspec1";

option JavaPagckageName = "com.test.xx";
option ObjectiveCPrefix = "KK";

import "basic.restspec";

/* DownloadSource */
enum DownloadSource {
    None = 0;
    Apple = 0x2;
}


enum_option DownloadFlag {
    // None
    None = 0;
    /* Save */
    Save = 1 << 1;
}

/* 作者 */
message Author {
    /// basic
    BasicObject? basic;
    /* 作者名称 */
    String name;
    Map info;
    Array members;
}

/* 下载器 */
message Download {
    /// 作者
    Author? author;
    DownloadSource source;
    DownloadFlag flag;
    String name;
    String url;
    Int64? count;
    Int createDate;
}
```

* code
```objective-c

//
// Code generated by https://github.com/0x1306a94/restspec
//

#ifndef KKBasicObject_h
#define KKBasicObject_h

#import <Foundation/Foundation.h>

NS_ASSUME_NONNULL_BEGIN

/// BasicObject
@interface KKBasicObject : NSObject
/// name
@property (nonatomic, copy) NSString *name;
@end

NS_ASSUME_NONNULL_END

#endif /* KKBasicObject_h */

#import "KKBasicObject.h"

@implementation KKBasicObject

@end

///////////////////////////////

#ifndef KKAuthor_h
#define KKAuthor_h

#import <Foundation/Foundation.h>

NS_ASSUME_NONNULL_BEGIN

@class KKBasicObject;

/* 作者 */
@interface KKAuthor : NSObject
/// basic
@property (nonatomic, strong, nullable) KKBasicObject *basic;
/* 作者名称 */
@property (nonatomic, copy) NSString *name;
@property (nonatomic, copy) NSDictionary *info;
@property (nonatomic, copy) NSArray *members;
@end

NS_ASSUME_NONNULL_END

#endif /* KKAuthor_h */

#import "KKAuthor.h"

@implementation KKAuthor

@end

///////////////////////////////

#ifndef KKDownloadSource_h
#define KKDownloadSource_h

#import <Foundation/Foundation.h>

/* DownloadSource */
typedef NS_ENUM(NSInteger, KKDownloadSource) {
	KKDownloadSourceNone = 0,
	KKDownloadSourceApple = 0x2,
};

#endif /* KKDownloadSource_h */


///////////////////////////////

#ifndef KKDownloadFlag_h
#define KKDownloadFlag_h

#import <Foundation/Foundation.h>

typedef NS_OPTIONS(NSUInteger, KKDownloadFlag) {
	// None
	KKDownloadFlagNone = 0,
	/* Save */
	KKDownloadFlagSave = 1 << 1,
};

#endif /* KKDownloadFlag_h */

///////////////////////////////

#ifndef KKDownload_h
#define KKDownload_h

#import <Foundation/Foundation.h>

#import "KKDownloadSource.h"
#import "KKDownloadFlag.h"
NS_ASSUME_NONNULL_BEGIN

@class KKAuthor;

/* 下载器 */
@interface KKDownload : NSObject
/// 作者
@property (nonatomic, strong, nullable) KKAuthor *author;
@property (nonatomic, assign) KKDownloadSource source;
@property (nonatomic, assign) KKDownloadFlag flag;
@property (nonatomic, copy) NSString *name;
@property (nonatomic, copy) NSString *url;
@property (nonatomic, assign) int64_t count;
@property (nonatomic, assign) NSInteger createDate;
@end

NS_ASSUME_NONNULL_END

#endif /* KKDownload_h */

#import "KKDownload.h"

@implementation KKDownload

@end

```